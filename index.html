<!doctype html>
<html>
  <head>
    <title>Peter's Page</title>
    <script type="text/javascript">
    
    document.addEventListener("DOMContentLoaded", init, false);
    document.addEventListener("mousemove", checkBorder, false);
    
    var mouseDown = false;
    
    function init()
    {
        var canvas = document.getElementById("canvas");
        canvas.addEventListener("mousemove", draw, false);
        canvas.addEventListener("mousedown", function(){mouseDown=true;}, false);
        canvas.addEventListener("mouseup", function(){mouseDown=false;}, false);
    }
    
    function checkBorder(e)
    {
        var canvas = document.getElementById("canvas");
        var x = e.x - canvas.offsetLeft;
        var y = e.y - canvas.offsetTop;
        if (x >= 700 || y >= 700 || x <= 0 || y <= 0)
            mouseDown = false;
    }
    
   function draw(e)
   {
   
        if (!mouseDown)
            return;
            
        var canvas = document.getElementById("canvas");   
        var ctx = canvas.getContext("2d");
        var x = e.x - this.offsetLeft;
        var y = e.y - this.offsetTop;
        
        var dx = Math.abs(x-350);
        var dy = Math.abs(y-350);
        var dis = Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));
        
        circs(350, 350, ctx, dis, "black");
        
        function circCallback(col)
        {
            return function(){
                circs(350, 350, ctx, dis, col);
            }
        }
        
        setTimeout(circCallback("orange"), 1000);
        setTimeout(circCallback("red"), 2000);
        setTimeout(circCallback("white"), 3000);
        
        /* Silly thing for doing all the colors!
        // 255/17 = 15. That's useful!
        // 17^3 = 4913
        for (var i = 0; i < 4913; i++)
        {
            var r = 15*Math.floor(i/289); 
            var g = 15*Math.floor((i-(r*289/15))/17);
            var b = 15*Math.floor(i%17);
            var ccol = "rgb(" + r.toString() + "," + g.toString() + "," +
                       b.toString() + ")";
            setTimeout(circCallback(ccol), i);
        }
        */
    
   }
   
   function circs(x, y, ctx, sze, col)
   {
        if (sze < 10) 
            return;
        var nsze = Math.floor(sze);
        ctx.beginPath();
        ctx.moveTo(x+nsze, y);
        ctx.arc(x, y, nsze, 0, 2*Math.PI);
        ctx.strokeStyle = col;
        ctx.stroke();
        circs(x+nsze, y, ctx, nsze/2);
        circs(x-nsze, y, ctx, nsze/2);
        circs(x, y+nsze, ctx, nsze/2);
        circs(x, y-nsze, ctx, nsze/2);
   }
   
   function clearScn()
   {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
       
        ctx.save();
        ctx.setTransform(1, 0 , 0, 1, 0, 0);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.restore();
        
   }
 
    </script>
    <style type="text/css">
    canvas {border: 1px solid black; }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="700" height="700"></canvas>
    <button type="button" onclick="clearScn()">Clear</button>
    <p>Site Under Construction</p>
  </body>
</html>